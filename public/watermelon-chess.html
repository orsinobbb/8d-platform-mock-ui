<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>è¥¿ç“œæ£‹ Watermelon Chess - ç´”å‰ç«¯ Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #020617;
      --panel: #0b1120;
      --grid: #1e293b;
      --accent: #f97373;  /* watermelon red */
      --accent2: #22c55e; /* watermelon green */
      --text: #e5e7eb;
      --muted: #9ca3af;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background:
        radial-gradient(circle at top, rgba(248,113,113,0.16), transparent 55%),
        radial-gradient(circle at bottom, rgba(34,197,94,0.16), transparent 55%),
        var(--bg);
      color: var(--text);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 12px;
    }
    .app-root {
      max-width: 960px;
      width: 100%;
    }
    .card {
      background: var(--panel);
      border-radius: 16px;
      border: 1px solid rgba(148,163,184,0.35);
      padding: 16px 18px 20px;
      box-shadow: 0 18px 45px rgba(15,23,42,0.6);
    }
    h1 {
      margin: 0 0 6px;
      font-size: 20px;
      display: flex;
      align-items: baseline;
      gap: 8px;
    }
    .subtitle {
      margin: 0 0 14px;
      font-size: 13px;
      color: var(--muted);
    }
    .badge {
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(248,113,113,0.7);
      color: #fee2e2;
      background: rgba(248,113,113,0.16);
    }
    .layout {
      display: grid;
      grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
      gap: 16px;
    }
    @media (max-width: 840px) {
      .layout { grid-template-columns: 1fr; }
    }
    .board-wrapper {
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .board-shell {
      padding: 10px;
      border-radius: 18px;
      background: radial-gradient(circle at top, rgba(248,113,113,0.3), rgba(30,64,175,0.5));
      box-shadow: 0 12px 30px rgba(15,23,42,0.9);
    }
    .board {
      display: grid;
      grid-template-columns: repeat(3, 80px);
      grid-template-rows: repeat(3, 80px);
      gap: 6px;
    }
    @media (max-width: 480px) {
      .board {
        grid-template-columns: repeat(3, 70px);
        grid-template-rows: repeat(3, 70px);
        gap: 5px;
      }
    }
    .cell {
      width: 80px;
      height: 80px;
      background: linear-gradient(145deg, #020617, #0f172a);
      border-radius: 16px;
      border: 1px solid rgba(148,163,184,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      position: relative;
      transition: background 0.15s ease-out, transform 0.08s ease-out, box-shadow 0.12s ease-out;
    }
    @media (max-width: 480px) {
      .cell { width: 70px; height: 70px; border-radius: 14px; }
    }
    .cell:hover {
      background: #020617;
      transform: translateY(-1px);
      box-shadow: 0 8px 18px rgba(0,0,0,0.7);
    }
    .cell.disabled {
      cursor: default;
      opacity: 0.45;
      transform: none;
      box-shadow: none;
    }
    .piece {
      width: 70%;
      height: 70%;
      border-radius: 999px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.8);
      position: relative;
      overflow: hidden;
      transform: scale(0.9);
      transition: transform 0.16s ease-out;
    }
    .piece::before {
      content: "";
      position: absolute;
      inset: 0;
      background: conic-gradient(from 200deg, #f97373, #fecaca, #f97373);
    }
    .piece::after {
      content: "";
      position: absolute;
      inset: 14%;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, rgba(254,249,195,0.9), rgba(220,38,38,0.9));
      box-shadow: inset 0 0 0 2px rgba(248,250,252,0.6);
    }
    .piece.player2::before {
      background: conic-gradient(from 200deg, #22c55e, #bbf7d0, #22c55e);
    }
    .piece.player2::after {
      background: radial-gradient(circle at 30% 20%, rgba(236,252,203,0.9), rgba(22,163,74,0.95));
    }
    .piece.highlight {
      transform: scale(1);
    }
    .dot-turn {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      margin-right: 4px;
      background: #f97373;
      box-shadow: 0 0 0 2px rgba(248,250,252,0.25);
    }
    .dot-turn.player2 {
      background: #22c55e;
    }
    .panel-right {
      border-radius: 14px;
      border: 1px solid rgba(148,163,184,0.4);
      padding: 12px 14px;
      background: radial-gradient(circle at top, rgba(56,189,248,0.12), rgba(15,23,42,0.96));
    }
    .panel-right h2 {
      font-size: 14px;
      margin: 0 0 8px;
    }
    .panel-right p {
      font-size: 13px;
      margin: 4px 0;
      color: var(--muted);
    }
    .status {
      margin-top: 4px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      font-size: 13px;
    }
    .status-pill {
      border-radius: 999px;
      padding: 4px 10px;
      border: 1px solid rgba(148,163,184,0.6);
      background: rgba(15,23,42,0.96);
      display: inline-flex;
      align-items: center;
    }
    .status-pill.turn {
      border-color: rgba(248,250,252,0.8);
    }
    .status-pill.info {
      font-size: 12px;
      color: var(--muted);
    }
    .btn-row {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    button.ctrl {
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.7);
      background: rgba(15,23,42,0.95);
      color: var(--text);
      font-size: 12px;
      padding: 6px 11px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }
    button.ctrl.primary {
      border-color: rgba(248,113,113,0.9);
      background: linear-gradient(135deg, rgba(248,113,113,0.95), rgba(239,68,68,0.95));
      color: #fef2f2;
    }
    button.ctrl:disabled {
      opacity: 0.5;
      cursor: default;
    }
    #msg {
      margin-top: 8px;
      font-size: 13px;
      min-height: 1.2em;
    }
    .tips {
      margin-top: 12px;
      font-size: 12px;
      color: var(--muted);
      line-height: 1.5;
    }
    .tips strong {
      color: #e5e7eb;
    }
  </style>
</head>
<body>
<div class="app-root">
  <div class="card">
    <h1>
      è¥¿ç“œæ£‹ Watermelon Chess
      <span class="badge">ç´”å‰ç«¯ Demoï¼ˆ3x3 å…©äººå°å¼ˆï¼‰</span>
    </h1>
    <p class="subtitle">é¡ä¼¼äº•å­—æ£‹çš„ä¸‰å­é€£ç·šéŠæˆ²ï¼šå…©ä½ç©å®¶è¼ªæµå°‡è¥¿ç“œå­æ”¾åœ¨ 3x3 ç›¤é¢ä¸Šï¼Œå…ˆé€£æˆä¸€ç·šè€…ç²å‹ã€‚æ‰€æœ‰ç‹€æ…‹åªå­˜åœ¨ç€è¦½å™¨è¨˜æ†¶é«”ï¼Œä¸æœƒå¯«å…¥ä»»ä½•å¾Œç«¯ã€‚</p>

    <div class="layout">
      <div class="board-wrapper">
        <div class="board-shell">
          <div class="board" id="board"></div>
        </div>
      </div>

      <div class="panel-right">
        <h2>å°å±€è³‡è¨Š</h2>
        <div class="status" id="status"></div>
        <div class="btn-row">
          <button class="ctrl primary" id="btnNew">é‡æ–°é–‹å§‹</button>
        </div>
        <p id="msg"></p>

        <div class="tips">
          <strong>ç©æ³•ï¼š</strong> å…©ä½ç©å®¶è¼ªæµé»æ“Šç©ºæ ¼æ”¾å­ï¼ˆå…ˆæ‰‹ç´…è‰²è¥¿ç“œå­ Player 1ï¼Œå¾Œæ‰‹ç¶ è‰²è¥¿ç“œå­ Player 2ï¼‰ã€‚<br/>
          <strong>å‹åˆ©æ¢ä»¶ï¼š</strong> ä»»ä½•ä¸€æ–¹åœ¨æ©«ã€ç›´æˆ–æ–œç·šé€£æˆä¸‰å­å³ç²å‹ã€‚è‹¥ 9 å€‹æ ¼å­éƒ½ä¸‹æ»¿ä»ç„¡äººé€£ç·šï¼Œå‰‡ç‚ºå¹³æ‰‹ã€‚<br/>
          <strong>é‡ç½®ï¼š</strong> å¯éš¨æ™‚æŒ‰ã€Œé‡æ–°é–‹å§‹ã€æ¸…ç©ºç›¤é¢é‡æ–°å°å±€ã€‚æ­¤ç‰ˆæœ¬ä¸æä¾›æ‚”æ£‹ï¼Œæ–¹ä¾¿å¾ŒçºŒè¦–éœ€æ±‚æ“´å……å®Œæ•´è¥¿ç“œæ£‹è¦å‰‡èˆ‡ç§»å­éšæ®µã€‚
        </div>
      </div>
    </div>
  </div>
</div>

<script>
(function () {
  const SIZE = 3;
  const EMPTY = 0;
  const P1 = 1; // watermelon red
  const P2 = 2; // rind green

  const boardEl = document.getElementById('board');
  const statusEl = document.getElementById('status');
  const msgEl = document.getElementById('msg');
  const btnNew = document.getElementById('btnNew');

  let board; // 2D array
  let currentPlayer; // 1 or 2
  let gameOver;

  function createEmptyBoard() {
    return Array.from({ length: SIZE }, () => Array(SIZE).fill(EMPTY));
  }

  function resetGame() {
    board = createEmptyBoard();
    currentPlayer = P1; // Player 1 starts
    gameOver = false;
    render();
  }

  function checkWinner() {
    // Rows & columns
    for (let i = 0; i < SIZE; i++) {
      // row
      if (board[i][0] !== EMPTY && board[i][0] === board[i][1] && board[i][1] === board[i][2]) {
        return board[i][0];
      }
      // column
      if (board[0][i] !== EMPTY && board[0][i] === board[1][i] && board[1][i] === board[2][i]) {
        return board[0][i];
      }
    }
    // diagonals
    if (board[0][0] !== EMPTY && board[0][0] === board[1][1] && board[1][1] === board[2][2]) {
      return board[0][0];
    }
    if (board[0][2] !== EMPTY && board[0][2] === board[1][1] && board[1][1] === board[2][0]) {
      return board[0][2];
    }
    // check if still empty cells
    const hasEmpty = board.some(row => row.some(cell => cell === EMPTY));
    if (!hasEmpty) return 'draw';
    return null;
  }

  function handleCellClick(row, col) {
    if (gameOver) return;
    if (board[row][col] !== EMPTY) return;

    board[row][col] = currentPlayer;
    const result = checkWinner();

    if (result === P1 || result === P2) {
      gameOver = true;
      render(result);
      return;
    }
    if (result === 'draw') {
      gameOver = true;
      render('draw');
      return;
    }

    currentPlayer = currentPlayer === P1 ? P2 : P1;
    render();
  }

  function render(result) {
    // board
    boardEl.innerHTML = '';
    for (let r = 0; r < SIZE; r++) {
      for (let c = 0; c < SIZE; c++) {
        const cell = document.createElement('div');
        cell.className = 'cell';
        if (gameOver) {
          cell.classList.add('disabled');
        }
        cell.addEventListener('click', () => handleCellClick(r, c));

        const v = board[r][c];
        if (v === P1 || v === P2) {
          const piece = document.createElement('div');
          piece.className = 'piece ' + (v === P1 ? 'player1' : 'player2');
          if (result && (result === v)) {
            piece.classList.add('highlight');
          }
          cell.appendChild(piece);
        }

        boardEl.appendChild(cell);
      }
    }

    // status
    statusEl.innerHTML = '';

    const pillTurn = document.createElement('div');
    pillTurn.className = 'status-pill turn';
    const dot = document.createElement('span');
    dot.className = 'dot-turn ' + (currentPlayer === P1 ? 'player1' : 'player2');
    pillTurn.appendChild(dot);
    pillTurn.appendChild(document.createTextNode(currentPlayer === P1 ? ' Player 1ï¼ˆç´…è‰²è¥¿ç“œå­ï¼‰' : ' Player 2ï¼ˆç¶ è‰²è¥¿ç“œå­ï¼‰'));
    statusEl.appendChild(pillTurn);

    const pillInfo = document.createElement('div');
    pillInfo.className = 'status-pill info';
    pillInfo.textContent = 'å…©äººå…±ç”¨ä¸€å°è£ç½®è¼ªæµé»æ“Šå³å¯å°å¼ˆã€‚';
    statusEl.appendChild(pillInfo);

    // message
    if (result === P1) {
      msgEl.textContent = 'ğŸ‰ å°å±€çµæŸï¼šPlayer 1ï¼ˆç´…è‰²è¥¿ç“œå­ï¼‰ç²å‹ï¼';
    } else if (result === P2) {
      msgEl.textContent = 'ğŸ‰ å°å±€çµæŸï¼šPlayer 2ï¼ˆç¶ è‰²è¥¿ç“œå­ï¼‰ç²å‹ï¼';
    } else if (result === 'draw') {
      msgEl.textContent = 'å°å±€çµæŸï¼šå¹³æ‰‹ï¼Œæ²’æœ‰ä¸€æ–¹é€£æˆä¸‰å­ã€‚';
    } else {
      msgEl.textContent = '';
    }
  }

  btnNew.addEventListener('click', resetGame);

  resetGame();
})();
</script>

</body>
</html>
